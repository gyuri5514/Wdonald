<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.wdelivery.admin.dao.AdminDAO">

	<select id="indexView" resultType="adminVO">
		select * from admin where admin_id NOT IN('admin') order by admin_seq LIMIT #{perPageNum} OFFSET #{pageStart}
	</select>
	
	<select id="userSelect" resultType="userVO">
		select * from user_info LIMIT #{perPageNum} OFFSET #{pageStart}
	</select>
	
	<select id="getUserContent" resultType="userVO">
		<![CDATA[
			select * from
			(select row_number() over(order by user_seq) as row,
			* from user_info where row_number()<=20)
			user_info
		]]>
	</select>

	<select id="selectCoupon" resultType="adminCouponVO">
		SELECT * FROM coupon ORDER BY coupon_seq ASC
	</select>

	<select id="couponCheck" resultType="int">
		SELECT count(*) FROM coupon
		WHERE coupon_code = #{cosupon_code}
	</select>
	
	<delete id="deleteUserCoupon" >
		DELETE FROM user_coupon WHERE coupon_code = #{coupon_code}
	</delete>	
	<delete id="deleteCoupon" >
		DELETE FROM coupon WHERE coupon_code = #{coupon_code}
	</delete>	
	
	<insert id="addCoupon">
		INSERT INTO coupon (coupon_code, coupon_title,
		coupon_type, coupon_regdate,
		coupon_enddate, coupon_status)
		VALUES(#{coupon_code}, #{coupon_title}, #{coupon_type},
		#{coupon_regdate},
		#{coupon_enddate}, #{coupon_status})
	</insert>
	<update id="statusCoupon">
		UPDATE coupon SET coupon_status = #{coupon_status} WHERE coupon_code = #{coupon_code} 
	</update>
	
	<select id="selectBannerList" resultType="adminBannerVO">
		SELECT * FROM banner ORDER BY banner_seq DESC
	</select>

	<insert id="bannerInsert" parameterType="adminBannerVO">
		INSERT INTO banner VALUES(#{banner_title}, #{banner_img}, #{banner_content})
	</insert>
	
	<!-- 메뉴관리 -->
	<select id="viewBurger" resultType="burgerVO">
		select * from burger order by b_regdate desc LIMIT #{perPageNum} OFFSET #{pageStart}
	</select>

</mapper>